!function(a){function b(a,b,e){if(this.recording)if("keydown"==e.type){for(1===a.length&&k&&d(),i=0;i<b.length;++i)c(b[i]);c(a)}else"keyup"==e.type&&0<j.length&&d();else m.apply(this,arguments)}function c(a){var b;for(b=0;b<j.length;++b)if(j[b]===a)return;j.push(a),1===a.length&&(k=!0)}function d(){g.push(j),j=[],k=!1,clearTimeout(l),l=setTimeout(f,1e3)}function e(a){var b;for(b=0;b<a.length;++b)a[b].sort(function(a,b){return 1<a.length&&1===b.length?-1:1===a.length&&1<b.length?1:a>b?1:-1}),a[b]=a[b].join("+")}function f(){h&&(e(g),h(g)),g=[],h=null,j=[]}var g=[],h=null,j=[],k=!1,l=null,m=a.prototype.handleKey;a.prototype.record=function(a){var b=this;b.recording=!0,h=function(){b.recording=!1,a.apply(b,arguments)}},a.prototype.handleKey=function(){b.apply(this,arguments)},a.init()}(Mousetrap);