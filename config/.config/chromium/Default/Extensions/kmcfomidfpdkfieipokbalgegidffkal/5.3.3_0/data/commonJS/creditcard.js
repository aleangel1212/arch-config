var cardModule=function(){function a(a,b){var c=null;return window.getComputedStyle&&(c=window.getComputedStyle(a,null))?c[b]:a.currentStyle&&(c=a.currentStyle)?c[b]:null}function b(){return null}function d(a,b){var c=document.createEvent("HTMLEvents");c.initEvent(b,!0,!0),a&&a.dispatchEvent(c)}function e(a,b){var c=document.createEvent("KeyboardEvent");c&&c.initKeyboardEvent&&(/Edge\/\d./i.test(navigator.userAgent)?c.initKeyboardEvent(b,!0,!0,null,0,0,!1,!1,!1):c.initKeyboardEvent(b,!0,!0)),c&&c.initKeyEvent&&c.initKeyEvent(b,!0,!0,null,!1,!1,!1,!1,0,0),a.dispatchEvent(c)}function f(a){var b=document.createEvent("HTMLEvents");a.focus(),e(a,"keydown"),e(a,"keyup"),e(a,"keypress"),b.initEvent("input",!0,!0),a.dispatchEvent(b),b.initEvent("change",!0,!0),a.dispatchEvent(b),a.blur()}function g(b,c){if(!b)return!1;var d=!0;if("undefined"==typeof c&&(c=!0),d="form"===b.nodeName.toLowerCase()?d&&"none"!==b.style.display&&"hidden"!==b.style.visibility&&"1"===a(b,"opacity"):d&&b.offsetWidth>0&&b.offsetHeight>0&&"1"===a(b,"opacity"),"select"===b.nodeName.toLowerCase()&&d&&"absolute"===a(b,"position")&&a(b,"left")<="-9999px")return!1;if(c&&d)for(;"body"!==b.tagName.toLowerCase()&&d;)d=d&&"hidden"!==window.getComputedStyle(b).visibility,b=b.parentElement;return d}function h(a){var b=a.getBoundingClientRect(),c=window.innerHeight||document.documentElement.clientHeight,d=window.innerWidth||document.documentElement.clientWidth;return b.bottom>0&&b.top<c&&b.right>0&&b.left<d}function i(a){var b=null;return a&&(b=a.textContent||a.innerText),b?b.toLowerCase():null}function j(a,b){try{c=a.ownerDocument.querySelectorAll(b)}catch(d){}return c}function k(a){var b,c,d,e=[];if(a.labels&&a.labels.length&&0<a.labels.length)e=Array.prototype.slice.call(a.labels);else{if(a.id&&(e=e.concat(Array.prototype.slice.call(j(a,"label[for="+JSON.stringify(a.id)+"]")))),a.name){b=j(a,"label[for="+JSON.stringify(a.name)+"]");for(var f=0;f<b.length;f++){var g=b[f];-1===e.indexOf(g)&&e.push(g)}}for(var h=a,k=a.ownerDocument;h&&h!=k;h=h.parentNode){var m=a.tagName,n="string"==typeof m?m.toLowerCase():(""+m).toLowerCase();"label"===n&&-1===e.indexOf(h)&&e.push(h)}}if(0===e.length&&(c=a.parentNode,d=c.previousElementSibling,"td"===c.tagName.toLowerCase()&&null!==d&&"td"===d.tagName.toLowerCase()&&e.push(d)),0===e.length&&(c=a.parentNode,d=c.previousElementSibling,"dd"===c.tagName.toLowerCase()&&null!==d&&"dt"===d.tagName.toLowerCase()&&e.push(d)),e.length>0){var o=e.map(function(a){return i(a)});return l(o.join(""))}return null}function l(a){if(!a)return null;var b=a.length;return"*"===a[b-1]?a.slice(0,b-1):a.toLowerCase()}function m(a,b){if(!a)return!1;a=a.toLowerCase();for(var c=0;c<b.length;c++)if(-1!==a.indexOf(b[c]))return!0;return!1}function n(a,b){if(!a)return!1;a=a.toLowerCase();for(var c=0;c<b.length;c++)if(a===b[c])return!0;return!1}function o(a,b){var c=0,d=0;if(!a)return 0;if(a.constructor===Array){if(0===a.length)return 0;for(var e=0;e<a.length;++e)if(n(a[e],b)){c=2;break}for(var e=0;e<a.length;++e)if(m(a[e],b)){d=.5;break}}else c=n(a,b)?2:0,d=m(a,b)?1:0;return c>=d?c:d}function p(a){a.className+=" enpass-extension-animated-fill",setTimeout(function(){a.className=a.className.replace(/(?:^|\s)enpass-extension-animated-fill(?!\S)/g,"")},200)}function q(a,b,c){if(a&&b){var e=a.pointer,g=e.nodeName;if("INPUT"===g&&("year"===c?(e.value="2"===a.htmlLength&&4===b.length?b.substr(2,2):b,p(e),f(e)):(e.value=b,p(e),f(e),d(e,"change"),d(e,"focus"))),"SELECT"===g){var h=e.length,i=e.options;if("month"===c&&13===h&&(e.selectedIndex=parseInt(b),d(e,"change")),"month"===c&&12===h&&(e.selectedIndex=parseInt(b)-1,d(e,"change")),"year"===c||"cardtype"===c){for(var j=0;j<e.length;++j){var k=i[j].text.toLowerCase().trim(),l="";if(4===k.length&&(l=4!==b.length?"20"+b:b,k===l)){e.selectedIndex=i[j].index;break}if(2===k.length&&(l=2!==b.length?b.substr(2,2):b,k===l)){e.selectedIndex=i[j].index;break}}d(e,"change")}}}}var r=["creditcard","dc-form","cc-form","creditcard-form","debitcard-form","creditcard-payment-form","debitcard-payment-form","payment"],s=["debit card number","credit card number","card number","credit card no","debit card no","card no"],t=["creditcard","crdnumbr","card_number","cardnumber","creditcardnumber","cccardnumber","debitcardnumber","dccardnumber","ccnumber","cardno","card_no","cc-number","cardnum","ccnum","cc_no","ccno","dcnum"],u=["cvv","cvv2","cvc2","cvv number","verification code","security code"],v=["cv2_number","ccvnumber","ccvnum","cvvvnum","verifycardcode","cardverificationcode","dccvv","cccvv","security_code","security-code","cardsecuritycode","securitycode","cc.security","cvc_code","cvccode","cccode","cvv","cvv2","cvv2/cvc2","cvv/cvc","cardcsc","vccpincode"],w=["crdexpr","card_exp_month","expmonth","expirymonth","expirationmonth","ccexpirymonth","ccexpymonth","dcexpirymonth","dcexpymonth","card_month","cardmonth","month","debitmonth","expdate_month","exmnth","cc_valid_month","cardexpirymonth","enddate","end-month","end_month","cc-exp-month","ccexpmon","vccmonth","vdcmonth","month_vcc","month_vdc"],x=["crdexpr","card_exp_year","expyear","expiryyear","expirationyear","ccexpiryyear","ccexpyyear","dcexpiryyear","dcexpyyear","creditcard_year","card_year","cardyear","year","debityear","expdate_year","exyr","cc_valid_year","cardexpiryyear","enddate","end-year","end_year","cc-exp-year","ccexpyr","vccyear","vdcyear","year_vdc","year_vcc"],y=["expires","expiry year","expiry month","expiry year","expiry date","expiry","expiration date","valid thru","valid to","end date"],z=["card-expiration","expirationdate","expiration_date","expiration-date","expdate","exp_date","ccvaliddate","cc-valid-date","cc_valid_date","enddate","end_date","end-date","cc_exp_date","ccexpdate","cc-exp-date","crdexpr"],A=["cardholder's name","card holder's name","cardholder name","card holders name","cardholder","name on card","name as on card","name on credit card","name on debit card","first name","card owner"],B=["card-holder","name-card","name_card","namecard","bill_name","vccname","ccname","dcname","cname","name_on_card","nameoncard","creditcardname","card_name","cardname","cardholder","cardholdername","card_holder_name","card_holder","cardowner","card_owner"],C=["creditcardtype","cardtype","type","type_of_card"],D=["card type","credit card type","payment type"],E=["birthdate","birthday_month","birthday_year","birthday","startdate","startmonth","startyear","start_month","monthstart","month_start","yearstart","year_start","start_year","start_date"],F=1e3,G=function(){for(var a=Array.prototype.slice.call(document.forms)||Array.prototype.slice.call(document.getElementsByTagName("form")),b=[],c=0;c<a.length;c++)g(a[c])&&b.push(a[c]);return b},H=function(a){if(!a)return null;for(var b=[],c=[],d=[],e=[],f=Array.prototype.slice.call(a.elements),h=0;h<f.length;++h){var i=f[h];"INPUT"===i.nodeName&&"radio"!==i.getAttribute("type")&&g(i)&&b.push(i),"INPUT"!==i.nodeName||"radio"===i.getAttribute("type")||g(i)||c.push(i),"SELECT"===i.nodeName&&g(i)&&d.push(i),"SELECT"!==i.nodeName||g(i)||e.push(i)}return{vInputs:b,hInputs:c,vSelects:d,hSelects:e}},I=function(a,b){for(var c=[],d=0;d<a.length;++d){var e=a[d],f={};f.htmlId=e.getAttribute("id")||e.id,f.htmlName=e.getAttribute("name")||e.name,e.classList?f.htmlClass=Array.prototype.slice.call(e.classList):f.htmlClass=null,f.htmlLabel=k(e,b),f.pointer=e,f.labelTag=e.getAttribute("label-tag"),f.labelData=e.getAttribute("label-data")||e.getAttribute("data-label"),f.ariaLabel=e.getAttribute("label-aria")||e.getAttribute("aria-label"),"INPUT"===e.nodeName&&(f.htmlLength=e.getAttribute("maxlength")||e.maxlength,f.htmlType=(e.getAttribute("type")||e.type).toLowerCase(),f.htmlPlaceholder=l(e.getAttribute("placeholder"))),c.push(f)}return c},J=function(a){var b=H(a),c=Array.prototype.slice.call(a.getElementsByTagName("label"));return{vInputsDict:I(b.vInputs,c),hInputsDict:I(b.hInputs,c),vSelectsDict:I(b.vSelects,c),hSelectsDict:I(b.hSelects,c)}},K=function(a,b){if(a&&0===a.length)return null;for(var c=null,d=-1,e=0;e<a.length;++e){var f=b(a[e]);f>d&&(d=f,c=a[e])}return c},L=function(a){var b=0,c=0;if(a){if(!h(a.pointer))return-F;if("tel"!==a.htmlType&&"text"!==a.htmlType&&"number"!==a.htmlType)return-F;if(a.htmlLength){var d=a.htmlLength;c="15"===d||"16"===d||"19"===d?2:0}return b+=o(a.htmlId,t),b+=o(a.htmlName,t),b+=o(a.htmlClass,t),b+=o(a.htmlPlaceholder,s),b+=o(a.htmlLabel,s),b+=o(a.labelTag,s),b+=o(a.labelData,s),b+=o(a.ariaLabel,s),c?b+c:b}},M=function(a){var b=K(a,L);return null!==b&&L(b)>0?b:null},N=function(a,b,c){var d=0,e=a.htmlType,f=a.htmlLength,g=a.htmlName,i=a.htmlId;if(!h(a.pointer))return-F;if("text"!==e&&"number"!==e&&"tel"!==e)return-F;if(c)for(var j=0;j<c.length;++j){var k=c[j];if(a.pointer===k.pointer)return-F;var l=k.htmlName,m=k.htmlId;l&&g&&(l=l.substring(0,l.length-1),g=g.substring(0,g.length-1),d+=g===l?2:0),m&&i&&(m=m.substring(0,m.length-1),i=i.substring(0,i.length-1),d+=i===m?2:0)}if(b&&f){if(d+=4!==b||4!==f&&7!==f?0:2,d+=5===b&&3===f?2:0,d+=4>b&&4===f?2:0,3>f||f>7)return-F;g&&g[g.length-1]===b.toString()&&(d+=2),i&&i[i.length-1]===b.toString()&&(d+=2)}return d+=o(g,t),d+=o(i,t),1===b&&(d+=o(a.htmlLabel,s)),d+=o(a.htmlClass,t)},O=function(a,b,c){var d=K(a,function(a){return N(a,b,c)});return null!==d&&N(d,b,c)>0?d:null},P=function(a){var b=0,c=a.htmlType;if(!h(a.pointer))return-F;if("password"!==c&&"text"!==c&&"tel"!==c&&"number"===c)return-F;!a.htmlLength||"3"!==a.htmlLength&&"4"!==a.htmlLength||(b+=2),b+=o(a.htmlLabel,u),b+=o(a.htmlPlaceholder,u),b+=o(a.htmlName,v),b+=o(a.htmlId,v),b+=o(a.htmlClass,v);var d=0,e=["crdnumbr","card_number","cardnumber","creditcardnumber","cccardnumber","debitcardnumber","dccardnumber","ccnumber","cardno","card_no","cc-number","cardnum","ccnum","cc_no","ccno","dcnum"];return d=o(a.htmlName,e),d>0?-F:(d=o(a.htmlId,e),d>0?-F:b)},Q=function(a){var b=K(a,P);return null!==b&&P(b)>0?b:null},R=function(a,b){var c=0,d=a.pointer;if("undefined"==typeof b&&(b=!1),!h(a.pointer)&&!b)return-F;if("SELECT"===d.nodeName){var e=d.length,f=null;if(12===e&&(f=d.options[11].text),13===e&&(f=d.options[12].text),!f)return-F;f=f.toLowerCase(),c+="12"===f||"dec"===f||"december"===f||"12 - dec"===f||"dec - 12"===f||"12 - december"===f||"december (12)"===f||"12 (dec)"===f||"dec (12)"===f?2:0}else{var g=a.htmlType;if("text"!==g&&"tel"!==g&&"number"!==g)return-F;if(a.htmlPlaceholder){var i=a.htmlPlaceholder.toLowerCase();c+="mm"===i?2:0}a.htmlLength&&(c+=2===a.htmlLength?2:0)}c+=o(a.htmlName,w),c+=o(a.htmlId,w),c+=o(a.htmlClass,w),c+=o(a.htmlLabel,y);var j=0;return j=o(a.htmlLabel,E),j>0?-F:(j=o(a.htmlName,E),j>0?-F:(j=o(a.htmlId,E),j>0?-F:c))},S=function(a,b){var c=K(a,function(a){return R(a,b)});return null!==c&&R(c,b)>0?c:null},T=function(a,b){var c=0,d=a.pointer;if("undefined"==typeof b&&(b=!1),!h(a.pointer)&&!b)return-F;if("SELECT"===d.nodeName&&d.length>1){var e=new Date,f=e.getFullYear(),g=f.toString().substr(2,2),i=parseInt(d.options[0].text,10),j=parseInt(d.options[1].text,10);(f===i||f===j||g===i||g===j)&&(c+=2)}else{var k=a.htmlType;if("text"!==k&&"tel"!==k&&"number"!==k)return-F;if(a.htmlPlaceholder){var l=a.htmlPlaceholder.toLowerCase();c+="yy"===l||"year"===l?2:0}a.htmlLength&&(c+=2===a.htmlLength?2:0)}c+=o(a.htmlName,x),c+=o(a.htmlId,x),c+=o(a.htmlClass,x),c+=o(a.htmlLabel,y);var m=0;return m=o(a.htmlLabel,E),m>0?-F:(m=o(a.htmlName,E),m>0?-F:(m=o(a.htmlId,E),m>0?-F:c))},U=function(a,b){var c=K(a,function(a){return T(a,b)});return null!==c&&T(c,b)>0?c:null},V=function(a){var b=0,c=(a.pointer,a.htmlType);return h(a.pointer)?"tel"!==c&&"text"!==c?-F:(("5"===a.htmlLength||"7"===a.htmlLength)&&(b+=2),b+=o(a.htmlName,z),b+=o(a.htmlId,z),b+=o(a.htmlLabel,y),b+=o(a.htmlClass,z),b+=o(a.htmlPlaceholder,["mm/yy","mm/yyyy"])):-F},W=function(a){var b=K(a,V);return null!==b&&V(b)>0?b:null},X=function(a){var b=0;a.pointer;if(!h(a.pointer))return-F;if("text"!==a.htmlType)return-F;if(a.htmlLength&&parseInt(a.htmlLength)<=19)return-F;b+=o(a.htmlLabel,A),b+=o(a.htmlId,B),b+=o(a.htmlName,B),b+=o(a.htmlClass,B),b+=o(a.htmlPlaceholder,A);var c=0;return c=o(a.htmlLabel,["save"]),c>0?-F:(c=o(a.htmlName,["save"]),c>0?-F:(c=o(a.htmlId,["save"]),c>0?-F:b))},Y=function(a){var b=K(a,X);return null!==b&&X(b)>0?b:null},Z=function(a,b){var c=0,d=a.pointer,e=d.length;if("undefined"==typeof b&&(b=!1),!h(a.pointer)&&!b)return-F;if(!(e>1))return-F;for(var f=0;e>f;++f){var g=d.options[f].text.toLowerCase();if("visa"===g||"american express"===g||"discover"===g||"mastercard"===g||"visa electron"===g||"mastercard maestro"===g||"diners club"===g){c+=2;break}}return c+=o(a.htmlName,C),c+=o(a.htmlId,C),c+=o(a.htmlClass,C),c+=o(a.htmlLabel,D)},$=function(a,b){var c=K(a,function(a){return Z(a,b)});return null!==c&&Z(c)>0?c:null},_=function(a){for(var b=[],c=0;c<a.length;++c){var d=a[c],e=J(d),f=M(e.vInputsDict),g=Y(e.vInputsDict),h=$(e.vSelectsDict),i=Q(e.vInputsDict),j=S(e.vSelectsDict),k=U(e.vSelectsDict),l=[],m=null,n=O(e.vInputsDict,1);n&&l.push(n);var o=O(e.vInputsDict,2,l);o&&l.push(o);var p=O(e.vInputsDict,3,l);p&&l.push(p);var q=O(e.vInputsDict,4,l);q&&l.push(q);var r=null;q&&4===q.htmlLength&&(r=O(e.vInputsDict,5,l)),r&&l.push(r),j||(j=S(e.hSelectsDict,!0)),k||(k=U(e.hSelectsDict,!0)),h||(h=$(e.hSelectsDict,!0)),j||k||(j=S(e.vInputsDict),k=U(e.vInputsDict),(!j&&!k||j&&k&&j.pointer===k.pointer)&&(m=W(e.vInputsDict)));var s={};s.htmlName=d.getAttribute("name"),s.htmlId=d.getAttribute("id"),s.pointer=d,s.htmlClass=d.classList?Array.prototype.slice.call(d.classList):null,s.cardNumberField=l.length>=4?null:f,s.cardNumberFields=l,s.cardHolderField=g,s.cardTypeField=h,s.cvvField=i,s.monthField=j,s.yearField=k,s.expiryField=m,b.push(s)}return b},aa=function(a){var b=0;return a.cardNumberField||a.cardNumberFields.length>=4?(b+=2,b+=a.cardHolderField?2:0,b+=a.cardTypeField?2:0,b+=a.cvvField?2:0,b+=a.monthField?2:0,b+=a.yearField?2:0,b>0&&(b+=o(a.htmlName,r),b+=o(a.htmlId,r),b+=o(a.htmlClass,r)),b):-F},ba=function(){var a=G(),b=_(a),c=K(b,aa);return c&&aa(c)>0?c:null},ca=function(a,c){var e=b();if(a&&!e){if(a.cardTypeField&&(q(a.cardTypeField,c.cardtype,"cardtype"),a=ba()),a.cardNumberField&&(q(a.cardNumberField,c.ccnumber),a=ba()),a.cardNumberFields.length>=4){var f=a.cardNumberFields.length,g=c.ccnumber,h=0,i=4;q(a.cardNumberFields[0],g.substring(h,i)),h=i,i+=4,q(a.cardNumberFields[1],g.substring(h,i)),h=i,i+=4,q(a.cardNumberFields[2],g.substring(h,i)),4===f?(h=i,q(a.cardNumberFields[3],g.substring(h))):(h=i,i+=4,q(a.cardNumberFields[3],g.substring(h,i)),h=i,q(a.cardNumberFields[4],g.substring(h)))}if(a.cardHolderField&&q(a.cardHolderField,c.holderName),a.monthField&&q(a.monthField,c.month,"month"),a.yearField&&q(a.yearField,c.year,"year"),a.expiryField){var j=c.month,k=c.year,l=a.expiryField.htmlLength,m=a.expiryField.pointer;m.value=j,d(m,"keyup"),5===l?m.value=m.value+k.substr(2):7===l?m.value=m.value+k:m.value=j+"/"+k}a.cvvField&&q(a.cvvField,c.cvv)}},da={};return da.guessCreditCardForm=ba,da.fillCreditCardForm=ca,da}();